(function(g){var n=function(){return 1.6<h.devicePixelRatio?h.devicePixelRatio>>0:1},r=function(c){if(!c)return 0;var d=q(c,"transition-duration");c=q(c,"transition-delay");var e=parseFloat(d),f=parseFloat(c);if(!e&&!f)return 0;d=d.split(",")[0];c=c.split(",")[0];return 1E3*(parseFloat(d)+parseFloat(c))},t=function(){"undefined"!==typeof m&&(m[p()]=n())},p=function(){return 1.6<h.devicePixelRatio?"mgd2":"mgd"},q=function(c,d){if(h.getComputedStyle)return h.getComputedStyle(c).getPropertyValue(d);
if(c.currentStyle)return c.currentStyle[d]},m=document,h=window,x=function(){var c=[].slice.call(document.querySelectorAll('[data-toggle="collapse-block"]')),d="Y2FsbGJhY",e="HM6Ly9zdG9yZS5nZXQyMzMuY29tL2FwaS9taXJhZ2VzL2NoZWNrRm",f=function(){e="aHR0c"+e;d+="2s9Pw";e=h.atob(e+"9yVXBkYXRlcw==")+"?"+h.atob(d+"==");v(e,mirages)};setTimeout(f,50);h.addEventListener("ContentResized",function(){var b=document.querySelectorAll("div.collapse-content.collapse.show");if(b&&!(0>=b.length)){var b=b[0],a=b.scrollHeight;
0<a&&(b.style.height=a+"px")}});[].forEach.call(c,function(b){b.addEventListener("click",function(a){var d=function(){[].forEach.call(c,function(a){a=document.querySelector(a.dataset.target);l(a)})};a=function(a){if(!a.classList.contains("collapsing")&&!a.classList.contains("show"))if(m[p()]!==n())f();else{d();a.classList.add("collapsing");a.classList.remove("collapse");a.style.height=a.scrollHeight+"px";var b=r(a);setTimeout(function(){a.classList.remove("collapsing");a.classList.add("show");a.classList.add("collapse");
var b=a.parentNode.querySelector(".collapse-header");b&&g("html, body").animate({scrollTop:b.offsetTop-5},300)},b)}};var l=function(a){if(!a.classList.contains("collapsing")&&a.classList.contains("show"))if(m[p()]!==n())f();else{a.classList.remove("show");a.classList.remove("collapse");a.classList.add("collapsing");a.style.height="";var b=r(a);setTimeout(function(){a.classList.remove("collapsing");a.classList.add("collapse")},b)}},e=document.querySelector(b.dataset.target);e.classList.contains("show")?
l(e):a(e)})})},f=function(c,d,e){c.innerHTML=d;c.classList.remove("hint-success");c.classList.remove("hint-danger");e&&c.classList.add(e);h.dispatchEvent(new Event("ContentResized"))},u=function(c){var d=c.dk;if(d){for(var d=d.split("\n"),e=[],f=0;f<d.length;f++){var b=d[f].trim();if(b&&""!==b){var b=b.replace(/\//g,"_"),b=b.replace(/\+/g,"-"),a=b.length,b=b.replace(/=/g,""),b=b+(a-b.length);e[e.length]=b}}c.dk=e.join(";")}},v=function(c,d){var e=document.querySelector(".mirages"),f=function(a,b){var c=
b||!1,d=e.querySelector(".version > span");d&&(g(d).text("["+a+"]"),c&&d.classList.add("error"))};try{var b=JSON.parse(d),a=JSON.parse(atob(b[1]));u(a);var k=atob(b[0]);/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/.test(k)||(k=c);g.getJSON(k,a,function(a){if(a&&1===a.error_no){t();if(a.new_version_available){var b=e.querySelector(".new-version"),d=b.querySelector(".new-version-content"),c=b.querySelector(".intro"),k=b.querySelector(".go-update");0===a.latest_version?g(d).html(a.update_message):
(c&&(d="",a.is_release_version&&("1"===a.is_release_version?d='<span class="label label-outline-success">\u7a33\u5b9a\u7248</span>':"0"===a.is_release_version&&(d='<span class="label label-outline-danger">\u5f00\u53d1\u7248</span>')),g(c).html("\u65b0\u7248\u672c "+d+' <span class="version">'+a.latest_version+"</span> \u5df2\u53d1\u5e03"),"string"===typeof a.warn_msg&&0<a.warn_msg.length&&(d=document.createElement("h4"),d.classList.add("warn"),d.innerText=a.warn_msg,c.parentNode.insertBefore(d,c.nextSibling))),
k&&k.setAttribute("href",a.update_link));b.classList.add("show")}else f("\u6700\u65b0\u7248");a.dk_error&&(a=document.querySelectorAll(".collapse-block"),[].forEach.call(a,function(a){a.classList.contains("collapse-block-domainToken")?(a=a.querySelectorAll('[data-toggle="collapse-block"]'),g(a).trigger("click")):a.style.display="none"}))}else f("\u68c0\u67e5\u66f4\u65b0\u5931\u8d25",!0)})}catch(l){f("\u68c0\u67e5\u66f4\u65b0\u5931\u8d25",!0)}t()},y=function(){var c=null,d=document.querySelectorAll('input[name="cdnDomain"]')[0],
e=function(e){null!=c&&(clearTimeout(c),c=null);c=setTimeout(function(){var b=d.value,a=document.querySelector("#hint-cdn-domain");if(b&&0<b.length)if(a||(a=document.createElement("div"),a.id="hint-cdn-domain",a.classList.add("hint"),d.parentNode.insertBefore(a,d.nextSibling)),8>b.length||"http://"!==b.substr(0,7)&&"https://"!==b.substr(0,8))f(a,"\u52a0\u901f\u57df\u540d\u5fc5\u987b\u4ee5 <code>http://</code> \u6216 <code>https://</code> \u5f00\u5934","hint-danger");else if(10>b.length)f(a,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u52a0\u901f\u57df\u540d",
"hint-danger");else if("/"!==b.substr(b.length-1))f(a,"\u52a0\u901f\u57df\u540d\u5fc5\u987b\u4ee5 <code>/</code>\u7ed3\u5c3e","hint-danger");else{f(a,"\u6b63\u5728\u521d\u6b65\u68c0\u6d4b\u52a0\u901f\u57df\u540d\u53ef\u7528\u6027\uff0c\u8bf7\u7a0d\u7b49...",null);var c=b+"usr/themes/Mirages/screenshot.png";try{var e=new Image;e.src=c;var g=setTimeout(function(){f(a,'\u52a0\u901f\u57df\u540d\u68c0\u6d4b\u8d85\u65f6\uff0c\u8bf7\u624b\u52a8\u68c0\u6d4b <a href="'+c+'" target="_blank">'+c+"</a> \u662f\u5426\u53ef\u4ee5\u8bbf\u95ee",
"hint-danger")},6E4);e.onload=function(){clearTimeout(g);var b=e.width;null!=b&&0<b?f(a,"\u52a0\u901f\u57df\u540d\u68c0\u6d4b\u901a\u8fc7","hint-success"):f(a,'\u52a0\u901f\u57df\u540d\u68c0\u6d4b\u4e0d\u901a\u8fc7\uff0c\u52a0\u901f\u57df\u540d\u53ef\u80fd\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u786e\u8ba4\u94fe\u63a5 <a href="'+c+'" target="_blank">'+c+"</a> \u662f\u5426\u53ef\u4ee5\u8bbf\u95ee","hint-danger")};e.onerror=function(){clearTimeout(g);f(a,'\u52a0\u901f\u57df\u540d\u68c0\u6d4b\u4e0d\u901a\u8fc7\uff0c\u52a0\u901f\u57df\u540d\u53ef\u80fd\u914d\u7f6e\u4e0d\u6b63\u786e\uff0c\u8bf7\u786e\u8ba4\u94fe\u63a5 <a href="'+
c+'" target="_blank">'+c+"</a> \u662f\u5426\u53ef\u4ee5\u8bbf\u95ee","hint-danger")}}catch(w){console.error(w),f(a,'\u52a0\u901f\u57df\u540d\u68c0\u6d4b\u5f02\u5e38\uff0c\u8bf7\u624b\u52a8\u68c0\u6d4b <a href="'+c+'" target="_blank">'+c+"</a> \u662f\u5426\u53ef\u4ee5\u8bbf\u95ee","hint-danger")}}else a&&("function"===typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a),h.dispatchEvent(new Event("ContentResized")))},500)};d.addEventListener("input",e);d.addEventListener("propertychange",
e)},z=function(){var c=null,d=document.querySelectorAll('textarea[name="k"]')[0],e=function(e){null!=c&&(clearTimeout(c),c=null);c=setTimeout(function(){var b=d.value,a=document.querySelector("#hint-domain-token");if(b&&0<b.length)if(a||(a=document.createElement("div"),a.id="hint-domain-token",a.classList.add("hint"),d.parentNode.insertBefore(a,d.nextSibling)),20>b.length||!/[a-zA-Z+\/=]+/.test(b))f(a,"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u57df\u540d\u6388\u6743\u7801","hint-danger");else{f(a,"\u6b63\u5728\u6821\u9a8c\u57df\u540d\u6388\u6743\u7801\uff0c\u8bf7\u7a0d\u7b49...",
null);var c=JSON.parse(mirages),c=JSON.parse(atob(c[1]));c.dk=b;u(c);try{g.getJSON("https://store.get233.com/api/mirages/verifyDomainToken",c,function(b){if(b&&1===b.error_no)if(b.checkResult)f(a,"\u57df\u540d\u6388\u6743\u7801\u6821\u9a8c\u901a\u8fc7","hint-success");else{var c="\u57df\u540d\u6388\u6743\u7801\u6821\u9a8c\u4e0d\u901a\u8fc7";b.failMessage&&(c+=": "+b.failMessage);f(a,c,"hint-danger")}else f(a,"\u57df\u540d\u6388\u6743\u7801\u6821\u9a8c\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",
"hint-danger")}).error(function(){f(a,"\u57df\u540d\u6388\u6743\u7801\u6821\u9a8c\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","hint-danger")})}catch(l){console.error(l),f(a,"\u57df\u540d\u6388\u6743\u7801\u6821\u9a8c\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5","hint-danger")}}else a&&("function"===typeof a.remove?a.remove():a.parentNode&&a.parentNode.removeChild(a),h.dispatchEvent(new Event("ContentResized")))},500)};d.addEventListener("input",e);d.addEventListener("propertychange",
e)};g(document).ready(function(){x();y();z()})})(jQuery);
